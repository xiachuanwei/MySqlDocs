#### MySql事务
1. 事务的特性：ACID Atomicity/Consistency/Isolation/Durability即原子、一致、隔离、持久
2. 多事务同时执行时会出现：
    * 脏读：读未提交；
    * 不可重复读：中间事务提交，导致两次读取的数据不一样；
    * 幻读：读的时候不存在，但执行增删操作时又存在了；或读的时候存在，执行增删操作时又不存在了；比如：插入一条主键唯一的数据时，先查询不存在，然后执行插入操作提示主键冲突，因为有其他事务已经提交该次插入数据
3. 事务隔离级别：读未提交、读提交、可重复读、串行，mysql默认Reatable-Read
4. 事务隔离实现的方式：
    * 对于读提交和可重复读，使用事务视图的方式实现；读未提交直接返回记录上的最新值，串行化是直接使用加锁的方式实现。
    * 可重复读事务实现方式：Mysql在每条记录更新时，都会产生一条回滚操作，记录上最新值，通过回滚操作可以得到前一个状态的值；所以不同时刻启动的事务会有不同的read-view，即不同的数据。同一条记录在系统中可以存在多个版本，这就是数据库的多版本并发控制（MVCC）。
    * 回滚日志在不需要的时候会删除，即当系统判断没有事务需要这些回滚日志时就会删除这些日志；回滚日志不需要的判断条件：即系统里没有比这个回滚日志更早的read-view时；
    * 不建议使用长事务：原因是长事务访问的数据库的相关的回滚段在事务提交之前都必须保留，太占用存储空间；另一方面长事务还占用锁，影响性能；
5. 事务开启的方式： 
6.  * 显式开启：begin或start transaction，配套的提交是commit，回滚是rollback
7.  * set autocommit=0，这个命令会将这个线程的自动提交关掉；这种方式不好，相当于在当前的任何操作都会处于事务中；